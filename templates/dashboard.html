{% extends "base.html" %}

{% block title %}Dashboard - Sistem Rekomendasi Jurusan{% endblock %}

{% block content %}
<div class="hero">
    <h1>TEMUKAN JURUSAN MASA DEPANMU</h1>
    <p>Gunakan pendekatan ilmiah RIASEC untuk menemukan jurusan di Universitas Jenderal Soedirman yang paling sesuai dengan minat dan potensimu.</p>
    <a href="{{ url_for('quiz') }}" class="btn btn-primary">
        MULAI TES SEKARANG <i class="fas fa-arrow-right"></i>
    </a>
</div>

<div class="section">
    <h2 style="margin-bottom: 2rem;">MENGAPA SISCER?</h2>
    <div class="features">
        <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-brain"></i></div>
            <h3>METODE ILMIAH</h3>
            <p>Menggunakan teori Holland Code (RIASEC) yang teruji untuk memetakan kepribadian karir.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-university"></i></div>
            <h3>DATA UNSOED</h3>
            <p>Rekomendasi spesifik untuk jurusan-jurusan yang tersedia di Universitas Jenderal Soedirman.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
            <h3>ANALISIS MENDALAM</h3>
            <p>Dapatkan penjelasan detail mengapa sebuah jurusan cocok dengan profilmu.</p>
        </div>
    </div>
</div>

<div class="chart-section">
    <h2>DISTRIBUSI JURUSAN</h2>
    <div style="position: relative; height: 400px; width: 100%;">
        <canvas id="riasecChart"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('riasecChart').getContext('2d');
    // eslint-disable-next-line
    const chartData = {{ chart_data | tojson }};
    
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['REALISTIC', 'INVESTIGATIVE', 'ARTISTIC', 'SOCIAL', 'ENTERPRISING', 'CONVENTIONAL'],
            datasets: [{
                label: 'Jumlah Jurusan',
                data: [
                    chartData['R'], 
                    chartData['I'], 
                    chartData['A'], 
                    chartData['S'], 
                    chartData['E'], 
                    chartData['C']
                ],
                backgroundColor: '#7C9885',
                borderColor: '#2C241B',
                borderWidth: 2,
                hoverBackgroundColor: '#8B7355',
                hoverBorderColor: '#2C241B',
                hoverBorderWidth: 2,
                barPercentage: 0.6,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: '#2C241B',
                    titleFont: { family: 'Space Grotesk', size: 13 },
                    bodyFont: { family: 'Inter', size: 12 },
                    padding: 10,
                    cornerRadius: 0,
                    displayColors: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        stepSize: 1,
                        font: {
                            size: 11,
                            weight: '700',
                            family: 'Space Grotesk'
                        },
                        color: '#2C241B'
                    },
                    grid: {
                        color: '#e5e5e5',
                        lineWidth: 1,
                        drawBorder: false
                    },
                    border: { display: false }
                },
                x: {
                    ticks: {
                        font: {
                            size: 11,
                            weight: '700',
                            family: 'Space Grotesk'
                        },
                        color: '#2C241B'
                    },
                    grid: {
                        display: false
                    },
                    border: {
                        display: true,
                        color: '#2C241B',
                        width: 2
                    }
                }
            }
        }
    });
</script>
{% endblock %}
